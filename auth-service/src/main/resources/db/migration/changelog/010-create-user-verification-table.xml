<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <changeSet id="010-create-user-verifications-table" author="David Kirakosyan">

        <sql>

            CREATE TABLE user_verifications
            (
                user_id                   UUID PRIMARY KEY,
                status                    verification_status           NOT NULL,
                requested_at              TIMESTAMP,
                verified_at               TIMESTAMP,
                expired_at                TIMESTAMP,
                passport_number           VARCHAR(255)                  NOT NULL UNIQUE,
                bank_account_number       VARCHAR(255),
                document_url              VARCHAR(500),
                document_type             verification_document         NOT NULL,
                rejection_reason          verification_rejection_reason NOT NULL,
                verification_method       verification_method           NOT NULL,
                documents_uploaded_at     TIMESTAMP,
                verified_by               VARCHAR(255),
                verified_by_type          verification_verifier         NOT NULL,
                active                    BOOLEAN,
                additional_comments       VARCHAR(1000),
                verification_token        VARCHAR(255),
                verification_token_expiry TIMESTAMP,
                CONSTRAINT fk_user_verifications_user FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
            );
        </sql>

    </changeSet>

</databaseChangeLog>